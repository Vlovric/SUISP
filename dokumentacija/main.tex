\documentclass[]{foi}
\usepackage{lipsum}
\usepackage[utf8]{inputenc}
\usepackage{float}

\vrstaRada{\seminar}
\predmet{Strate\v{s}ko upravljanje informacijskom sigurno\v{s}\'{c}u i privatno\v{s}\'{c}u}
\title{Klijentski kriptirani trezor datoteka s revizijskim tragom u Pythonu}

\author{Viktor Lovrić, Magdalena Markovinović, David Matijanić}
\spolStudenta{\musko}
\mentor{Izv. prof. dr. sc. Igor Tomičić}
\spolMentora{\musko}
\godina{2025}
\mjesec{Listopad}
\date{2025}
\status{redoviti}
\indeks{0016154953, 0016155896, 0016153844}
\smjer{Informacijsko i programsko inženjerstvo}
\titulaProfesora{}

\sazetak{Napisati (ono s maila translate)}

\kljucneRijeci{Napisati}

\begin{document}

\maketitle

\tableofcontents

\pagestyle{plain}

\chapter{Uvod}

Digitalni trezori ili sigurni spremišta podataka važan su alati za zaštitu osjetljivih informacija, kako privatnih, tako i onih poslovnih. Moderni sustavi pohrane koriste razne načine upravljanja pristupa i zaštite podataka, ali ne osiguravaju uvijek adekvatnu razinu sigurnosti i privatnosti. 
Lako su ranjivi na različite prijetnje, uključujući neovlašteni pristup, krađu podataka i gubitak podataka zbog tehničkih kvarova ili ljudskih pogrešaka. Kriptografska enkripcija podataka pruža dodatnu razinu zaštite. Ovaj rad želi prikazati složenost implementacije jednog takvog sustava, fokusirajući se na ključne aspekte kao što su slojevita enkripcija, kontrola pristupa, revizija, životni ciklus ključa, sigurnosno brisanje, sigurnosno dijeljenje i mehanizmi zaključavanja ili odgode.

\section{ISO 27001}

ISO 27001 međunarodni je standard koji definira zahtjeve za sustav upravljanja informacijskom sigurnošću (ISMS). Ovaj standard pruža okvir za zaštitu povjerljivosti, cjelovitosti i dostupnosti informacija unutar organizacije. Implementacija ISO 27001 standarda pomaže organizacijama u identifikaciji i upravljanju rizicima vezanim uz informacije te osigurava usklađenost s pravnim i regulatornim zahtjevima.
Ključan dio ISO 27001 standarda za ovaj projekt su \textbf{kontrole kriptografske} definirane u sekciji \textbf{A.10} (Politika korištenja kriptografskih kontrola A.10.1.1 i Upravljanje klučevima A.10.1.2). One uključuju zahtjeve za upravljanje kriptografskim ključevima, zaštitu podataka tijekom prijenosa i pohrane te osiguranje integriteta i povjerljivosti informacija. 

\textbf{Kontrole pristupa i autentikacije (A.9.4.2 i A.9.4.3)} zahtjevaju definiranje i upravljanje pravima pristupa korisnika te implementaciju sigurnih metoda autentikacije prije pristupanja resursima. Ove kontrole direktno se odnose na implementaciju lozinki i autentikacijskih mehanizama temeljenih na klučevima. 

\textbf{Kontrola A.11.2.7} (Sigurno odlaganje ili ponovna upotreba opreme) zahtijeva da sva oprema koja sadrži medije za pohranu bude provjerena kako bi se osiguralo da su svi podaci uklonjeni ili zaštićeni, što projekt adresira kroz secure deletion workflow koji osigurava kriptografski siguran način brisanja podataka i ključeva.

\textbf{Kontrole zapisivanja i zaštite zapisa revizije (A.12.4.1, A.12.4.2 i A.12.4.3)} zahtijevaju izradu zapisnika događaja koji bilježe aktivnosti korisnika, iznimke i greške u sustavu, te zaštitu tih zapisa od neovlaštenih promjena. Projekt implementira nepromjenjivi zapisnik revizije koji evidentira sve operacije s ključevima, rotacije, pristupe datotekama te administratorske aktivnosti. Zapisnici su zaštićeni od izmjena i omogućuju export za eksterne revizije, čime se osigurava transparentnost i mogućnost revizije sigurnosnih događaja u skladu s regulatornim zahtjevima.
\cite{iso_27001}

\section{Slojevita enkripcija (engl. \textit{envelope encryption})}

Slojevita enkripcija je proces kriptiranja ključa drugim ključem\cite{google_envelope}.
\newline
Ključ za kriptiranje podataka (engl. \textit{data encryption key}), u nastavku teksta \textbf{DEK}, je simetrični ključ koji se koristi za kriptiranje i dekriptiranje podataka jedne datoteke jednog korisnika.
Za svaku datoteku se koristi zaseban DEK koji se nakon generiranja kriptira pri pohrani što zadovoljava zahtjev kriptiranja pri pohrani (engl. \textit{encryption at rest})\cite{google_envelope}.
\newline
Ključ za kriptiranje ključa (engl. \textit{key encryption key}), u nastavku teksta \textbf{KEK}, je asimetrični javni ključ koji koji se koristi za \textit{omotavanje} (engl. \textit{wrapping}) DEK-a, tj. kriptiranje DEK-a\cite{google_envelope}.
KEK se generira prilikom kreiranja korisničkog računa koristeći RSA (engl. \textit{Rivest-Shamir-Adleman}) ili ECC (engl. \textit{Elliptic Curve Cryptography}) algoritme i koristi se kako bi jedan KEK kriptirao više DEK-ova što eliminira potrebu za rotiranem ključeva za svaku datoteku, već je potrebno rotirati samo KEK.
Za generiranje DEK-a je preporućeno korištenje AES-256 (engl. \textit{Advanced Encryption Standard}) algoritma u GCM (engl. \textit{Galois Counter Mode}) načinu rada zbog njegove sigurnosti i brzine\cite{google_envelope}.
AES-256-GCM pruža i efikasnu provjeru integriteta podataka koristeći autentifikacijsku oznaku (engl. \textit{authentication tag}) kojom prilikom dekriptiranja provjerava integritet podataka.


\section{Kontrola pristupa i revizija}

Kontrola pristupa se sastoji od autorizacije i autentifikacije korisnika. Autentifikacija je proces u kojemu sustav provjerava identitet korisnika kako bi mu omogućio pristup\cite{ibm_access}, što se radi kroz jedno od 3 metode: nešto što korisnik zna (npr. lozinka), nešto što korisnik ima (npr. token) ili nešto što korisnik jest (npr. biometrijski podaci).
Autorizacija je proces određivanja razine pristupa resursima sustava na temelju korisničkog identiteta i njegovih dopuštenja\cite{ibm_access}. S obzirom da je naš sustav klijentski i zamišljen samo za jednog korisnika po uređaju, autorizacija se neće obavljati već će jedinstveni korisnik imati potpune ovlasti.
Odabrana metoda autentifikacije je lozinka iz koje se generira ključ koristeći neki od algoritama za derivaciju ključa poput PBKDF2 (engl. \textit{Password-Based Key Derivation Function 2}), scrypt ili Argon2 kako bi se taj ključ mogao pohraniti za autentifikaciju, a da pritom ostane zaštićen\cite{kdf}.
\newline
Revizija je proces pregleda i preispitivanja procesa i stanja kako bi se prosudila razina usklađenosti stanja s unaprijed definiranim kriterijima\cite{revizija}.
Kako bi se revizija mogla provesti, potrebno je voditi revizijski trag (engl. \textit{audit log}) svih važnih događaja i radnji u sustavu. Važna osobina revizijskog traga je njegova nepromjenjivost kako bi se spriječile zloupotrebe i manipulacije podacima\cite{audit}. Iz tog razloga se za validaciju ispravnosti revizijskog traga koriste mehanizmi poput digitalnog potpisa i lanca sažetaka (engl. \textit{hash chain}) gdje se svaki novi zapis povezuje sa sažetkom prethodnog zapisa, čime se osigurava da bilo kakva izmjena u prethodnim zapisima rezultira promjenom u sažetcima i time postaje vidljiva, što je ista tehnika koja se koristi u blockhain sustavima.
Još jedna važna karakteristika revizijskog traga je što on mora biti izvoziv (engl. \textit{exportable}) kako bi se mogao analizirati izvan samog sustava, npr. u slučaju inspekcije od strane treće strane.
U tom je slučaju potrebno revizijski trag kriptirati javnim ključem osobe koja će vršiti inspekciju kako bi se osigurala povjerljivost podataka.

\section{Životni ciklus ključa}

Ovaj odlomak opisuje neke važne karakteristike svake faze životnog ciklusa ključa. Svaka od faza se bilježi u revizijski trag, kao i neke dodatne radnje.
\newline
Životni ciklus ključa se sastoji od nekoliko faza koje su važne za ovaj sustav\cite{key_lifecycle}:
\begin{itemize}
    \item \textbf{Generiranje ključa} - Obavezno korištenje sigurnog algoritma i generatora nasumičnih brojeva za generiranje ključa
    \item \textbf{Pohrana ključa} - Spremanje ključa se radi samo u kriptiranom obliku
    \item \textbf{Rotacija ključa} - Redovita rotacija ključa smanjuje rizik od komprimiranih ključeva. Rotacija ključa, kao i standardi za generiranje ključa mogu biti definirani u sigurnosnoj politici koju sustav zatim implementira i prati.
    \item \textbf{Arhiviranje i uništavanje ključa} - Kada ključ više nije potreban, potrebno ga je sigurno uništiti kako se ne bi mogao išćitati ili koristiti.
\end{itemize}

\section{Sigurnosno brisanje}

Iz razloga što klasične metode brisanja ne uklanjaju podatke s medija već samo označavaju prostor kao slobodan za prepisivanje, potrebno je implementirati sigurnosno brisanje (engl. \textit{secure deletion}) kako bi se spriječilo vraćanje izbrisanih podataka. Sigurnosno brisanje se može implementirati na nekoliko načina\cite{secure_deletion}, no za ovaj sustav najbolje implementacije su kriptografsko brisanje (engl. \textit{cryptographic erasure}) i prepisivanje (engl. \textit{overwriting}). Kriptografsko brisanje se sastoji od uništavanja ključa koji je korišten za kriptiranje podataka, čime kriptirani podatci postaju nečitljivi. Prepisivanje se sastoji od višestrukog prepisivanja podataka s nasumičnim podatcima kako bi se spriječilo njihovo isčitavanje.

\section{Sigurnosno dijeljenje}

Sigurnosno dijeljenje podrazumijeva E2EE (engl. \textit{end-to-end encryption}) dijeljenje podataka između korisnika bez izlaganja podataka trećim stranama. To se može postići korištenjem Shamirovog tajnog dijeljenja (engl. \textit{Shamir's Secret Sharing}) ili dijeljenih ključeva specifičnih za svaku datoteku, pri čemu se ključ sadržaja ponovno kriptira javnim ključem svakog primatelja (engl. \textit{per-recipient re-wrapping}). Za ovaj sustav odabrana je druga metoda zbog klijentske prirode sustava i jednostavnosti implementacije. Ovom implementacijom je omogučeno da datoteka može biti dekriptirana sa više privatnih ključeva jer je njen DEK kriptiran s više javnih ključeva.

\section{Mehanizam zaključavanja ili odgode}

Zadnji mehanizam koji je potreban za implementaciju je mehanizam zaključavanja (engl. \textit{lockout}) i mehanizam odgode (engl. \textit{backoff}) gdje oba mehanizma služe za obranu od brute-force napada na lozinku.
\newline
Mehanizam zaključavanja onemogućava pristup sustavu nakon određenog broja neuspješnih pokušaja prijave, dok mehanizam odgode povećava vrijeme čekanja između pokušaja prijave nakon svakog neuspješnog pokušaja. Nužno je balansirati sigurnost i korisničko iskustvo jer svaki mehanizam ima svoje mane. Mehanizam zaključava se može činiti frustrirajućim za korisnika, dok mehanizam odgode može biti negiran ako napadač koristi višedretveni napad neke vrste\cite{brute-force}.

\chapter{Tehnologije za implementaciju}

Piše David

\chapter{Funkcionalnosti}

Piše David

\makebackmatter

\end{document}
